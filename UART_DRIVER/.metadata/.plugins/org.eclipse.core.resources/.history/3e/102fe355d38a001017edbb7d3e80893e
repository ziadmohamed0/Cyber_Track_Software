/*
 * tim.h
 *
 *  Created on: Sep 5, 2025
 *      Author: ziad
 */

#ifndef CUSTOM_DRIVER_MCAL_TIM_TIM_H_
#define CUSTOM_DRIVER_MCAL_TIM_TIM_H_

#include "../rcc/rcc.h"

typedef void(*timer_callback_t)(void);

class timer : public rcc{
public:
    timer(TIM_TypeDef* tim, uint32_t prescaler, uint32_t arr, timer_callback_t cb);
    void start();
    void stop();
    void pwm_init(uint8_t channel);
    void pwm_set_duty(uint8_t channel, uint32_t duty);
    void handler();
private:
    TIM_TypeDef* instance;
    timer_callback_t callback;
};

extern timer* timer_objects[4];

#endif /* CUSTOM_DRIVER_MCAL_TIM_TIM_H_ */
